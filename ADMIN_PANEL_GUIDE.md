# üéõÔ∏è Fiscus Admin Panel & Real-time Monitoring

## –û–≥–ª—è–¥

–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–Ω–µ–ª—å –¥–æ–∑–≤–æ–ª—è—î –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º:
- üîÑ –ó–∞–ø—É—Å–∫–∞—Ç–∏ —Å–∫—Ä–µ–ø–µ—Ä–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –º–∞–≥–∞–∑–∏–Ω—ñ–≤ –∑ –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º
- üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å —Å–∫—Ä–µ–ø—ñ–Ω–≥—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- üìà –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–æ–≤–∞—Ä–∞—Ö —ñ —Ü—ñ–Ω–∞—Ö
- üö® –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

---

## –ß–∞—Å—Ç–∏–Ω–∞ 1: Django Admin Panel

### üåê –í—Ö—ñ–¥ –≤ Admin

```
URL: http://localhost:8000/admin/
Username: [–≤–∞—à admin –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á]
```

### üìç Store Admin (–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—ñ–≤)

**–î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:** Admin ‚Üí Core ‚Üí Stores

#### –°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω—ñ–≤
–ü–æ–∫–∞–∑—É—î:
- **Chain Name** ‚Äî –Ω–∞–∑–≤–∞ –ª–∞–Ω—Ü—é–≥–∞ (–ê–¢–ë, –°—ñ–ª—å–ø–æ)
- **Address** ‚Äî –∞–¥—Ä–µ—Å–∞ –º–∞–≥–∞–∑–∏–Ω—É
- **External ID** ‚Äî ID –≤—ñ–¥ —Ä—ñ—Ç–µ–π–ª–µ—Ä–∞ (–¥–ª—è —Å–∫—Ä–µ–ø—ñ–Ω–≥—É)
- **Status** ‚Äî –∞–∫—Ç–∏–≤–Ω–∏–π/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π (üü¢ Active / üî¥ Inactive)
- **Prices in DB** ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ —É –±–∞–∑—ñ
- **Last Update** ‚Äî –∫–æ–ª–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä–∞–∑ –æ–Ω–æ–≤–ª—é–≤–∞–ª–∏—Å—è —Ü—ñ–Ω–∏ (üü¢ < 1h / üü† hours / üî¥ days)

#### üöÄ –ó–∞–ø—É—Å–∫ —Å–∫—Ä–µ–ø—ñ–Ω–≥—É –¥–ª—è –º–∞–≥–∞–∑–∏–Ω—É

**–ö—Ä–æ–∫ 1:** –í–∏–±—Ä–∞—Ç–∏ –º–∞–≥–∞–∑–∏–Ω(–∏)
```
‚òê –ê–¢–ë - –≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞, 48
‚òë –ê–¢–ë - –≤—É–ª. –°–∏—Ö—ñ–≤, 12        ‚Üê –í–∏–±—Ä–∞—Ç–∏
‚òë –°—ñ–ª—å–ø–æ - Forum Lviv          ‚Üê –í–∏–±—Ä–∞—Ç–∏ –∫—ñ–ª—å–∫–∞
```

**–ö—Ä–æ–∫ 2:** –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É –µ–∫—à–µ–Ω—É
```
Action: üîÑ Scrape selected stores NOW
Click: "Go"
```

**–ö—Ä–æ–∫ 3:** –ü–æ–±–∞—á–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö
```
‚úì Scraping queued for 2 store(s). Total items to scrape: 150.
Check Celery logs for progress.
```

#### –î–µ—Ç–∞–ª—ñ –º–∞–≥–∞–∑–∏–Ω—É

–ö–ª—ñ–∫ –Ω–∞ –Ω–∞–∑–≤—É –º–∞–≥–∞–∑–∏–Ω—É:
- **Store Location** ‚Üí Chain, Address, Active status
- **Geographic Coordinates** ‚Üí –®–∏—Ä–æ—Ç–∞, –î–æ–≤–≥–æ—Ç–∞ (–¥–ª—è —Ä–∞—Å—á–µ—Ç—É –¥–∞–ª—å–Ω–æ—Å—Ç–∏)
- **Statistics** (collapsed) ‚Üí –û—Å—Ç–∞–Ω–Ω—ñ —Ü—ñ–Ω–∏, —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

---

### üì¶ Product Admin (–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤)

**–î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:** Admin ‚Üí Core ‚Üí Products

#### –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤
–ü–æ–∫–∞–∑—É—î:
- **Name** ‚Äî –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
- **Category** ‚Äî –∫–∞—Ç–µ–≥–æ—Ä—ñ—è (—Ö–ª–µ–±, –º–æ–ª–æ—á–Ω—ñ, –æ–≤–æ—á—ñ)
- **Cheapest Price** ‚Äî –Ω–∞–π–¥–µ—à–µ–≤—à–∞ —Ü—ñ–Ω–∞ –ø–æ –≤—Å—ñ–º –º–∞–≥–∞–∑–∏–Ω–∞–º
  ```
  45.50 ‚Ç¥ @ –ê–¢–ë    ‚Üê –ù–∞–π–¥–µ—à–µ–≤—à–∏–π
  ```
- **In Stores** ‚Äî –≤ –∫–æ–ª—å–∫–æ—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö —î —Ç–æ–≤–∞—Ä
- **Barcode** ‚Äî —à—Ç—Ä–∏—Ö–∫–æ–¥ (—É–∫–æ—Ä–æ—á–µ–Ω–∏–π)

#### –¶—ñ–Ω–∏ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ö–ª—ñ–∫ –Ω–∞ —Ç–æ–≤–∞—Ä ‚Üí –∑–∞–∫–ª–∞–¥–∫–∞ "Price Statistics":
```
Min: 40.00 ‚Ç¥    (–Ω–∞–π–¥–µ—à–µ–≤—à–µ)
Avg: 44.25 ‚Ç¥    (—Å–µ—Ä–µ–¥–Ω—è —Ü—ñ–Ω–∞)
Max: 49.99 ‚Ç¥    (–Ω–∞–π–¥–æ—Ä–æ–∂—á–µ)
Stores: 5       (–≤ 5 –º–∞–≥–∞–∑–∏–Ω–∞—Ö)
```

**Inline —Ç–∞–±–ª–∏—Ü—è "Price History":**
–ü–æ–∫–∞–∑—É—î –≤—Å—ñ —Ü—ñ–Ω–∏ –¥–ª—è —Ü—å–æ–≥–æ —Ç–æ–≤–∞—Ä—É –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º:
| Product | Store | Price | In Stock | Scraped At |
|---------|-------|-------|----------|-----------|
| –ú–æ–ª–æ–∫–æ –ì–∞–ª–∏—á–∏–Ω–∞ 1–ª | –ê–¢–ë –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞ | 45.99 ‚Ç¥ | ‚úì | 2026-02-18 10:00 |
| –ú–æ–ª–æ–∫–æ –ì–∞–ª–∏—á–∏–Ω–∞ 1–ª | –°—ñ–ª—å–ø–æ Forum | 47.50 ‚Ç¥ | ‚úì | 2026-02-18 09:50 |

---

### üí∞ Price Admin (–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ü—ñ–Ω–∞–º–∏)

**–î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:** Admin ‚Üí Core ‚Üí Prices

#### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
```
Filter by: Store Chain (–ê–¢–ë / –°—ñ–ª—å–ø–æ / –ê—à–∞–Ω)
           In Stock (Yes / No)
           Date Range (—Å–∫—Ä–µ–ø—ñ–Ω–≥—É)
```

#### –°–ø–∏—Å–æ–∫ —Ü—ñ–Ω
| Product | Store | Price | Status | Age |
|---------|-------|-------|--------|-----|
| –•–ª—ñ–± –ø—à–µ–Ω–∏—á–Ω–∏–π | –ê–¢–ë –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞ | 12.50 ‚Ç¥ | ‚úì In Stock | Fresh (< 1h) üü¢ |
| –ú–æ–ª–æ–∫–æ –ì–∞–ª–∏—á–∏–Ω–∞ | –°—ñ–ª—å–ø–æ Forest | 47.50 ‚Ç¥ | ‚úì In Stock | 4h ago üü† |
| –ú–∞—Å–ª–æ –≤–µ—Ä—à–∫–æ–≤–µ | –ê–¢–ë –°–∏—Ö—ñ–≤ | 89.99 ‚Ç¥ | ‚úó Out | Stale (3d) üî¥ |

#### üé® Live Freshness Indicator
```
üü¢ Fresh (< 1h)      ‚Äî –©–æ–π–Ω–æ –æ–Ω–æ–≤–∏–ª–∏
üü† 4h ago            ‚Äî –ü–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏–º–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—å–æ–≥–æ–¥–Ω—ñ
üî¥ Stale (3d ago)    ‚Äî –¢–ï–†–ú–Ü–ù–û–í–û –æ–Ω–æ–≤–∏—Ç–∏
```

#### Actions
```
‚úì Mark as In Stock    ‚Äî –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ —É –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
‚úó Mark as Out of Stock ‚Äî –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ —Ä–æ–∑–ø—Ä–æ–¥–∞–Ω–æ
```

---

### üìã Task Log Admin (Real-time Monitoring) ‚≠ê –ù–û–í–ò–ù–ê

**–î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:** Admin ‚Üí Core ‚Üí Task Logs

–¶–µ **–æ—Å–Ω–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å** –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å–∫—Ä–µ–ø—ñ—Ä—ñ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ!

#### –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
| Task | Store | Status | Progress | Errors | Age |
|------|-------|--------|----------|--------|-----|
| Scrape ATB (–≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞, 48) | –ê–¢–ë | üü° In Progress | ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 45/100 (45%) | ‚ö† 2 failed | 2m ago üü¢ |
| Scrape –°—ñ–ª—å–ø–æ (Forum Lviv) | –°—ñ–ª—å–ø–æ | üü¢ Completed | ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì 200/200 (100%) | - | 5m ago |
| Scrape Auchan (Sokilnyky) | Auchan | üî¥ Failed | ‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 30/200 (15%) | ‚ö† 170 failed | 1h ago üî¥ |

#### üé® Status Badges
```
üü° In Progress    ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
üü¢ Completed      ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
üî¥ Failed         ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –≤–¥–∞–ª–æ—Å—è
‚ö™ Pending        ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è —É —á–µ—Ä–∑—ñ
üîò Cancelled      ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ –∞–¥–º—ñ–Ω–æ–º
```

#### Progress Bar
```
‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 45/100 (45%)
```
- –ó–∞–ø–æ–≤–Ω–µ–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ = –æ–±—Ä–æ–±–ª–µ–Ω–æ
- –ü–æ—Ä–æ–∂–Ω—è —á–∞—Å—Ç–∏–Ω–∞ = –∑–∞–ª–∏—à–∏–ª–æ—Å—å
- –í—ñ–¥—Å–æ—Ç–æ–∫ = (–æ–±—Ä–æ–±–ª–µ–Ω–æ / –≤—Å—å–æ–≥–æ) √ó 100

#### Error Indicator
```
‚ö† 2 failed     ‚Äî –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ –æ–±—Ä–æ–±–∫–∏
```
–ö–ª—ñ–∫ –Ω–∞ –ø–æ–º–∏–ª–∫—É ‚Üí –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–∏—á–∏–Ω—É

#### –¢–∞–π–º–µ—Ä ("Age")
```
üü¢ just now    ‚Äî –ú–µ–Ω—à–µ 1 —Ö–≤–∏–ª–∏–Ω–∏
üîµ 10m ago     ‚Äî 10 —Ö–≤–∏–ª–∏–Ω —Ç–æ–º—É
üü† 2h ago      ‚Äî 2 –≥–æ–¥–∏–Ω–∏ —Ç–æ–º—É (–ø–æ—Ä–∞ –æ–Ω–æ–≤–∏—Ç–∏)
```

---

## –ß–∞—Å—Ç–∏–Ω–∞ 2: REST API –¥–ª—è Real-time Monitoring

### üîå API Endpoints (–ª–∏—à–µ –¥–ª—è Admin)

–í—Å—ñ —Ü—ñ endpoints –ø–æ—Ç—Ä–µ–±—É—é—Ç—å:
```
Authorization: Bearer {JWT_TOKEN}
Permission: is_admin_user
```

#### 1Ô∏è‚É£ –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è

```bash
GET /api/admin/tasks/{task_id}/
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:8000/api/admin/tasks/abc123def456/
```

**Response (200 OK):**
```json
{
  "task_id": "abc123def456",
  "task_name": "Scrape ATB (–≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞, 48)",
  "status": "progress",
  "items_total": 100,
  "items_processed": 45,
  "items_failed": 2,
  "progress_percent": 45,
  "message": "Currently processing...",
  "error_message": null,
  "created_at": "2026-02-18T10:00:00Z",
  "started_at": "2026-02-18T10:00:05Z",
  "completed_at": null,
  "is_complete": false
}
```

#### 2Ô∏è‚É£ –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å

```bash
GET /api/admin/tasks/?status=progress&limit=10&offset=0
```

**Query Parameters:**
- `status` ‚Äî Filter: pending, started, progress, completed, failed
- `store_id` ‚Äî Filter: ID –º–∞–≥–∞–∑–∏–Ω—É
- `limit` ‚Äî –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (default: 20)
- `offset` ‚Äî –î–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó

**Response:**
```json
{
  "total": 150,
  "limit": 10,
  "offset": 0,
  "tasks": [
    {
      "task_id": "abc123",
      "task_name": "Scrape ATB",
      "status": "progress",
      "progress_percent": 45,
      "items_total": 100,
      "items_processed": 45,
      "items_failed": 2,
      "created_at": "2026-02-18T10:00:00Z",
      "store_id": 1
    },
    ...
  ]
}
```

#### 3Ô∏è‚É£ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å—ñ–º –∑–∞–≤–¥–∞–Ω–Ω—è–º

```bash
GET /api/admin/tasks/stats/
```

**Response:**
```json
{
  "total_tasks": 150,
  "active_tasks": 5,
  "completed_today": 20,
  "failed_tasks": 3,
  "total_items_processed": 5000,
  "by_status": {
    "completed": 120,
    "failed": 3,
    "progress": 5,
    "pending": 22
  },
  "success_rate": 97.6
}
```

#### 4Ô∏è‚É£ Task Logs –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω—É

```bash
GET /api/admin/stores/{store_id}/task-logs/
```

**Response:**
```json
[
  {
    "task_id": "abc123",
    "task_name": "Scrape ATB",
    "status": "completed",
    "items_total": 100,
    "items_processed": 100,
    "items_failed": 0,
    "message": "Successfully completed",
    "error_message": null,
    "created_at": "2026-02-18T10:00:00Z",
    "completed_at": "2026-02-18T10:15:00Z"
  }
]
```

---

## –ß–∞—Å—Ç–∏–Ω–∞ 3: Workflow (–°—Ü–µ–Ω–∞—Ä—ñ–π –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –®–≤–∏–¥–∫–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ü—ñ–Ω–∏ —É –ê–¢–ë

**Step 1:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Admin ‚Üí Stores
```
http://localhost:8000/admin/core/store/
```

**Step 2:** –í–∏–±—Ä–∞—Ç–∏ –ê–¢–ë –ª–æ—Ü—ñ—Ü—ñ—ó (–≥–∞–ª–æ—á–∫–∞)
```
‚òë –ê–¢–ë - –≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞, 48
‚òë –ê–¢–ë - –≤—É–ª. –°–∏—Ö—ñ–≤, 12
```

**Step 3:** –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ Action
```
Action dropdown: "üîÑ Scrape selected stores NOW"
Click: "Go"
```

**Step 4:** –ü–µ—Ä–µ–∞–ø—ñ –Ω–∞ Task Logs
```
http://localhost:8000/admin/core/tasklog/
```

**Step 5:** –ë–∞—á–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å
```
| Scrape –ê–¢–ë (–≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞) | –ê–¢–ë | üü° Progress | ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 50/100 (50%) |
```

---

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: API –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑—ñ —Å–∫—Ä–∏–ø—Ç—É

```python
import requests
import time

# Assume JWT token is obtained
HEADERS = {"Authorization": "Bearer YOUR_JWT_TOKEN"}
API_URL = "http://localhost:8000/api"

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–µ–ø–µ—Ä —á–µ—Ä–µ–∑ admin action (–∑–æ–≤–Ω—ñ —Ü—å–æ–≥–æ —Å–∫—Ä–∏–ø—Ç—É)
# –û—Ç—Ä–∏–º–∞—Ç–∏ TASK_ID –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

TASK_ID = "abc123def456"

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å
for _ in range(60):  # –ú–∞–∫—Å–∏–º—É–º 60 –∑–∞–ø–∏—Ç—ñ–≤
    response = requests.get(
        f"{API_URL}/admin/tasks/{TASK_ID}/",
        headers=HEADERS
    )
    task = response.json()
    
    print(f"Status: {task['status']}")
    print(f"Progress: {task['items_processed']}/{task['items_total']} ({task['progress_percent']}%)")
    
    if task['is_complete']:
        print(f"‚úì Complete! {task['message']}")
        break
    
    time.sleep(5)  # –ü–µ—Ä–µ–≤—ñ—Ä—è–π –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
```

---

## –ß–∞—Å—Ç–∏–Ω–∞ 4: Migration & Setup

–ü–µ—Ä—à –Ω—ñ–∂ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏, –∑–∞–ø—É—Å—Ç–∏:

```bash
# 1Ô∏è‚É£ –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–ª—è TaskLog
python manage.py makemigrations

# 2Ô∏è‚É£ –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é
python manage.py migrate

# 3Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ TaskLogAdmin –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π
python manage.py shell
>>> from django.contrib import admin
>>> from apps.core.models import TaskLog
>>> admin.site._registry[TaskLog]  # –ø–æ–≤–∏–Ω–Ω–∞ –≤–∏–≤–µ—Å—Ç–∏ <apps.core.admin.TaskLogAdmin>
```

---

## –ß–∞—Å—Ç–∏–Ω–∞ 5: –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### ‚ú® Real-time Refresh
Admin Dashboard –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç—É—Å –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π f5 –ø–∞–Ω–µ–ª—ñ).

### üé® –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ö–æ–ª—å–æ—Ä—É–≤–∞–Ω–Ω—è
- **üü¢ Green** ‚Äî —Å–≤—ñ–∂–µ, —É—Å–ø—ñ—Ö
- **üü† Orange** ‚Äî –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å, –ø–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏
- **üî¥ Red** ‚Äî –ø–æ–º–∏–ª–∫–∞, –ø–æ—Ç—Ä–µ–±—É—î –¥—ñ—ó

### üìä –ü—Ä–æ—Å—Ç—ñ –º–µ—Ç—Ä–∏–∫–∏
```
Success Rate = completed_tasks / (completed_tasks + failed_tasks) √ó 100
```

### üö´ –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
–¢—ñ–ª—å–∫–∏ `is_admin_user=True` –º–æ–∂—É—Ç—å:
- –í–∏–¥–∏—Ç–∏ Task Logs  
- –ó–∞–ø—É—Å–∫–∞—Ç–∏ —Å–∫—Ä–µ–ø–µ—Ä–∏
- –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ API –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

---

## Troubleshooting

### ‚ùå "No tasks appear"
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏ —â–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–∫—Ä–µ–ø–µ—Ä  
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Store Admin ‚Üí –¥–∞—Ç–∞ –¥—ñ—ó ‚Üí Scrape Now

### ‚ùå "Task stuck on 50%"
**–ü—Ä–∏—á–∏–Ω–∞:** Celery worker –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π!  
**–†—ñ—à–µ–Ω–Ω—è:** 
```bash
# Terminal 1
celery -A config worker -l info

# Terminal 2 (—è–∫—â–æ –ø–æ—Ç—Ä–µ–±—É—î—Ç—å—Å—è Beat –¥–ª—è —Ä–æ–∑–∫–ª–∞–¥—É)
celery -A config beat -l info
```

### ‚ùå "Permission denied" –Ω–∞ API
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Ç—Ä–µ–±—É—î—Ç—å—Å—è admin –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π JWT  
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –û—Ç—Ä–∏–º–∞–π—Ç–µ JWT token
curl -X POST http://localhost:8000/api/token/ \
  -d "username=admin&password=PASSWORD"

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –π–æ–≥–æ –≤ –∑–∞–ø–∏—Ç–∞—Ö
curl -H "Authorization: Bearer TOKEN" \
  http://localhost:8000/api/admin/tasks/
```

---

**–í–µ—Ä—Å—ñ—è:** 1.0 (Fiscus MVP)  
**√öltima –∞—Ç—É–∞–ª—å–Ω–∞:** 2026-02-18
